<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Avatar Debug</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background-color: #181818;
        }
        .controls {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 5px;
        }
        button {
            margin: 5px;
            padding: 10px 15px;
            background: #007acc;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
        button:hover {
            background: #005a9e;
        }
        #debug-info {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 100;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-width: 300px;
        }
    </style>
</head>
<body>
    <div class="controls">
        <h3>Debug Controls</h3>
        <button onclick="runShowFunction()">Run show()</button>
        <button onclick="runShowWithOptions()">Run show() with options</button>
        <button onclick="clearScene()">Clear Scene</button>
        <button onclick="toggleDebugInfo()">Toggle Debug Info</button>
    </div>
    
    <div id="debug-info" style="display: none;">
        <h4>Debug Information</h4>
        <div id="debug-content"></div>
    </div>
    <div id="avatar-container" style="width: auto; height: 800px; border: 1px solid #c0c0c0;"></div>

    <script src="dist/bundle.js"></script>
    <script>
        let debugMode = false;
        let currentRenderer = null;

        // Enable debug mode
        function enableDebugMode() {
            debugMode = true;
            console.log("Debug mode enabled");
            
            // Override console.log to also display in debug panel
            const originalLog = console.log;
            console.log = function(...args) {
                originalLog.apply(console, args);
                if (debugMode) {
                    updateDebugInfo(args.join(' '));
                }
            };
        }

        function updateDebugInfo(message) {
            const debugContent = document.getElementById('debug-content');
            const timestamp = new Date().toLocaleTimeString();
            debugContent.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            debugContent.scrollTop = debugContent.scrollHeight;
        }

        function runShowFunction() {
            console.log("Running show() function in debug mode");
            
            window['3DAvatar'].test();

            

            // if (window['3DAvatar'] && window['3DAvatar'].show) {

            //     const renderTargetDOM = document.getElementById('avatar-container');
            //     window['3DAvatar'].show( "avatar-creator/sampled_depth_points_with_color.json",  {
            //         duration: 500,
            //         targetDOM: renderTargetDOM,
            //     });
            // } else {
            //     console.error("3DAvatar.show function not found");
            // }
        }

        function runShowWithOptions() {
            console.log("Running show() with custom options");
            clearScene();
            if (window['3DAvatar'] && window['3DAvatar'].show) {
                window['3DAvatar'].show(
                    "debug_data.json",
                {
                    duration: 500,
                    animation: true,
                    debug: true
                });
            } else {
                console.error("3DAvatar.show function not found");
            }
        }


        // Enable debug mode on page load
        enableDebugMode();
        console.log("Debug page loaded. Ready to test 3D Avatar functions.");
    </script>
</body>
</html>
